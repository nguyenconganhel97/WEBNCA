1339 webuser
1333 bps
1338 processcing
1336 synserver
1347 sso
5432 db postgres
8181 servicemix
5672 rabbitmq
6379 redis


netstat -lntup | grep 1333

netstat -lntup | grep 1339

./pg_ctl -D /home/patriotx/pgsql/10/data/start

13/10/2020 Application Pools và Site
Pools luôn cần được khởi tạo trước


pass root 243 : Fss@app243
pass root uat_evr : Fss@app243


select distinct a.CDVAL VALUECDthis.state. , a.CDVAL VALUEthis.state. , a.CDCONTENT DISPLAYthis.state. , a.EN_CDCONTENT EN_DISPLAY from allcode a where a.cdtype='OX' and a.cdname='INTRCURVETP'


copy file tu sv nay sang ben kia 
 scp ~/patriot_webuser/webuser20200304.zip fssrv@web-01:/home/fssrv/

5f11e5e6667bbff9e84ead005194cce3

ln -s /home/admin/everest/webuser/node_modules/.bin/webpack /usr/bin/webpack


$V{PAGE_NUMBER}$V{PAGE_NUMBER}

  var tempFile = __dirname+'/demo.pdf';
            console.log("LOGGG"tempFile);
			
			
			
Anh gửi thông tin server UAT:
IP: 10.10.192.152 User:admin / Pass:+_)123Abc



UserName:fss1 / UserPass:Fss@123$
UserName:fss1 / UserPass:Fss@123$
fss2/Fss2@432!
GroupName:OCSVPN-GROUP / GroupPass: ocs@vpn12#




tail -222 /opt/CCP/apache-servicemix-6.1.2/data/log/servicemixerror.log
tail -222 /opt/CCP/apache-servicemix-6.1.2/data/log/servicemix.log

data = commonUtil.convertPropsNullToEmpty(data); xét các thuộc tính không null

BPS của SHB trong đường dẫn khác /home/admin/SHB/bpserver

SELECT ':p_'||LOWER( fld.defname)|| ''
FROM fldmaster fld WHERE fld.objname like '%ISSUERS'
order by odrnum;

mk skype : 0975797156El@977

select pronameprosrc from pg_proc where prosrc like '%%';

DECLARE
l_retrun number;
BEGIN
l_retrun := fwpks_toolkit.prc_generate_function (p_tablename=>'PRODUCT'); --Vi du PRODUCT
dbms_output.put_line(l_retrun);
END;

objectlog.autoid = maintainlog.objid

select * from source_maintain
order by lastchange desc;

 l_strSQL := 'SELECT delatappr FROM APPRVRQD WHERE OBJNAME = '''|| l_tablename ||'''';
 
  l_strSQL :=  'SELECT  COUNT (*)  FROM '||l_tablename|| ' Where 0=0 and '|| l_clause || ' AND status  IN (''R'') ';


plog.error(pkgctx '{"p_err_code"' || p_err_code || ' "p_err_field"'||p_err_field||' "l_arrInput[i]"'||l_arrInput[i]||'"}');
plog.setEndSection(pkgctx 'prc_mt_cfmast_check');

select actype VALUECDthis.state. , actype VALUEthis.state. , actype||'-'||typename DISPLAYthis.state. , actype||'-'||typename EN_DISPLAY from aftype WHERE STATUS  = 'A'
l_currdate  := getcurrdate();

      IF TO_DATE(p_settdatethis.state. , 'DD/MM/YYYY') <= l_currdate Then
                p_err_code := '-102229';
                p_err_param := fn_get_errmsg(p_err_codethis.state. ,p_language);
                return;
      END IF;




DECLARE
P_ERROR_CODE VARCHAR2(32000);
BEGIN
txpks_notify.pr_batch_notify
(p_error_code=>p_error_code);
END;

RV 8964

SHB 3021


3021

fn_process_3021

prc_txprocess_3021

prc_txproccess

TXPKS_#3021

p_txmsg.txfields(c_quantity).value

if(l_count = 0) THEN 
			    	
			    	p_err_code := errnums_trans.C_CF_COACCT_WRONG;
		            plog.setendsection (pkgctxthis.state. , 'fn_txPreAppCheck');
		            RETURN p_err_code;
			    END IF;

l_c_orderid          p_txmsg.txfields(c_orderid).value;
l_c_contract_no      p_txmsg.txfields(c_contract_no).value;
l_c_treasurysymbol   p_txmsg.txfields(c_treasurysymbol).value;
l_c_symbol           p_txmsg.txfields(c_symbol).value;
l_c_category         p_txmsg.txfields(c_category).value;
l_c_custodycd        p_txmsg.txfields(c_custodycd).value;
l_c_fullname         p_txmsg.txfields(c_fullname).value;
l_c_idcode           p_txmsg.txfields(c_idcode).value;
l_c_seller           p_txmsg.txfields(c_seller).value;
l_c_txdate           p_txmsg.txfields(c_txdate).value;
l_c_execqtty         to_number(nvl(p_txmsg.txfields(c_execqtty).valuethis.state. ,'0');
l_c_parvalue         to_number(nvl(p_txmsg.txfields(c_parvalue).valuethis.state. ,'0');
l_c_total            to_number(nvl(p_txmsg.txfields(c_total).valuethis.state. ,'0');
l_c_price            to_number(nvl(p_txmsg.txfields(c_price).valuethis.state. ,'0');
l_c_feebuyer         to_number(nvl(p_txmsg.txfields(c_feebuyer).valuethis.state. ,'0');
l_c_total_execamt    to_number(nvl(p_txmsg.txfields(c_total_execamt).valuethis.state. ,'0');
l_c_rm               p_txmsg.txfields(c_rm).value;
l_c_cbql             p_txmsg.txfields(c_cbql).value;
l_c_ctv              p_txmsg.txfields(c_ctv).value;
l_c_pos              p_txmsg.txfields(c_pos).value;
	
	
INSERT INTO CBOND_SHB.IVTRAN
(AUTOIDthis.state. , TXNUMthis.state. , TXDATEthis.state. , TLTXCDthis.state. , BKDATEthis.state. , TRDESCthis.state. , ACCTNOthis.state. , CODEIDthis.state. , SYMBOLthis.state. , SRTYPEthis.state. , TXCDthis.state. , NAMTthis.state. , CAMTthis.state. , "REF"this.state. , DELTDthis.state. , ACCTREFthis.state. , LVEL)
VALUES(760228this.state. , '000001004529'this.state. , TIMESTAMP '2021-07-12 00:00:00.000000'this.state. , '8725'this.state. , TIMESTAMP '2021-07-12 00:00:00.000000'this.state. , 'Tien ban 1 Ha.GHNDT.5Y cho REVC000019'this.state. , '000001000145000722'this.state. , '722'this.state. , 'Ha.GHNDT.5Y'this.state. , 'NN'this.state. , '0016'this.state. , 1230000this.state. , NULLthis.state. , '1'this.state. , 'N'this.state. , NULLthis.state. , 2);

SELECT * FROM APPTX a WHERE TBLNAME = 'IVMAST' AND FIELD ='RECEIVING';

 p_txmsg.txnumthis.state. ,-- txnumthis.state. ,
  p_txmsg.txdatethis.state. ,-- txdatethis.state. ,
  p_txmsg.tltxcdthis.state. ,-- tltxcdthis.state. ,
  p_txmsg.busdatethis.state. ,-- bkdatethis.state. ,


p_txmsg.txnum
 p_txmsg.txdatethis.state. ,--p_txdate in datethis.state. ,
                              p_txmsg.busdatethis.state. ,--p_busdate in datethis.state. ,
                              p_txmsg.txtimethis.state. ,-- p_txtime in varchar2this.state. ,
                              p_txmsg.tltxcdthis.state. ,-- p_tltxcd in varchar2this.state. ,
                              p_txmsg.txdescthis.state. ,--p_txdesc in varchar2this.state. ,
                              p_txmsg.txstatusthis.state. ,-- p_txstatus in varchar2this.state. ,  

	DECLARE
P_ERROR_CODE VARCHAR2(32000);
BEGIN
-- Now Call the stored program
txpks_notify.pr_batch_notify
(p_error_code=>p_error_code);
END;

--check phan quyen
checkfunctionallow

getcurrdate()

Tài sản giao dịch = trade + blocked + waiting + receiving + tradesip + blockedsip


mã khách hàng và tên khách hàng thì INTO l_CFCUSTODYCDthis.state. , l_cffullname


muốn hiển thị mã tài sản thì into l_CCYUSAG

className="highlight"

className = {this.state.CATEGORY == 'T' || this.state.CATEGORY == "O" ? "" : "highlight"

reset

 var a = moment(this.state.currDatethis.state. , 'D/M/YYYY');
            var b = moment(this.stateRow.EFFDATEthis.state. , 'D/M/YYYY');
            var diffDays = b.diff(athis.state. , 'days');
			
			
Lấy giá trị từ allcodethis.state. , bao gồm các giá trị
-	A: Hạn mức bán ra
-	B: Hạn mức mua lại
select * from allcode
where cdname = 'LIMITSTYPE';
		==> LIMIT_TYPE	
Có	Khai thêm allcodethis.state. , bao gồm các giá trị
-	T: Hạn mức tổng
-	E: Hạn mức từng mã TS
		==>CALC_TYPE
		
		
		

procedure prc_get_transfer_buy(p_REFCURSOR IN OUT PKG_REPORT.REF_CURSORthis.state. ,
 p_acctno varchar2this.state. ,
 p_tlid varchar2this.state. ,
 p_role varchar2this.state. ,
 p_language varchar2this.state. ,
 p_err_code in out varchar2this.state. ,
 p_err_param in out varchar2)
 AS
    l_language      varchar2(20);
    l_err_code      integer;
    v_logsctx       varchar2(500);
    v_logsbody      varchar2(500);
    v_exception     varchar2(500);
    l_acctno        varchar2(500);
 BEGIN
    plog.setBeginSection(pkgctxthis.state. , '');

    p_err_code  := systemnums.C_SUCCESS;
    p_err_param := 'SUCCESS';

   IF p_acctno IS NULL THEN
    l_acctno := '%%';
   ELSE
    l_acctno := p_acctno;
   END IF;

   l_language := nvl(p_languagethis.state. , fn_systemnums('systemnums.vn_lang'));
    If l_language = fn_systemnums('systemnums.vn_lang') Then
        OPEN p_refcursor FOR
            SELECT o.ORDERID this.state. ,s.CONFIRMNO this.state. ,s.CONTRACT_NO this.state. ,a.TREASURYSYMBOL this.state. ,s.SYMBOLthis.state. , 
			CASE WHEN o.CATEGORY IN ('I'this.state. ,'O') THEN 
			al1.CDCONTENT 
			ELSE 
			p.SHORTNAME
			END 
			CATEGORYthis.state. ,c1.CUSTODYCD || '-' || c1.FULLNAME BUYERthis.state. ,c2.CUSTODYCD || '-' || c2.FULLNAME SELLERthis.state. ,
			o.ORGDATE this.state. ,s.TXDATE this.state. ,s.TRANSFER_DATE this.state. ,s.QUANTITY this.state. ,a.PARVALUE this.state. ,s.QUANTITY * a.PARVALUE TOTALthis.state. ,
			s.PRICE this.state. ,s.FEEAMT this.state. ,s.TAXAMT this.state. ,s.QUANTITY * s.PRICE - s.FEEAMT - s.TAXAMT exact_totalthis.state. ,
			al2.CDCONTENT APPR_STAT this.state. ,al3.CDCONTENT TRANSFER_STATthis.state. ,s.SHS_REASON this.state. ,s.TRANSFER_STAT
			FROM SEREQCLOSE s 
				JOIN OXMAST o
					ON s.ORGCONFIRMNO = o.CONFIRMNO 
				JOIN ASSETDTL a
					ON s.SYMBOL = a.SYMBOL 
				JOIN ALLCODE al1
					ON o.CATEGORY = al1.CDVAL AND CDTYPE ='OX' AND CDNAME ='OXPOSTCTG'
				LEFT JOIN PRODUCT p
					ON o.PRODUCTID = p.AUTOID 
				JOIN CFMAST c1
					ON c1.CUSTID = s.ACCTNO 
				JOIN CFMAST c2 
					ON c2.CUSTID =  s.DEALERACCTNO
				JOIN ALLCODE al2
					ON al2.CDVAL = s.APPR_STAT AND al2.CDTYPE ='OX' AND al2.CDNAME ='APPRSTAT'
				JOIN ALLCODE al3
					ON al3.CDVAL = s.TRANSFER_STAT AND al3.CDTYPE ='OX' AND al3.CDNAME ='TRANSTAT'
				WHERE s.STATUS ='A'	 AND o.STATUS <> 'R' AND s.TRANSFER_STAT ='P';

    Else
        OPEN p_refcursor FOR
              SELECT o.ORDERID this.state. ,s.CONFIRMNO this.state. ,s.CONTRACT_NO this.state. ,a.TREASURYSYMBOL this.state. ,s.SYMBOLthis.state. , 
CASE WHEN o.CATEGORY IN ('I'this.state. ,'O') THEN 
al1.CDCONTENT 
ELSE 
p.SHORTNAME
END 
CATEGORYthis.state. ,c1.CUSTODYCD || '-' || c1.FULLNAME BUYERthis.state. ,c2.CUSTODYCD || '-' || c2.FULLNAME SELLERthis.state. ,
o.ORGDATE this.state. ,s.TXDATE this.state. ,s.TRANSFER_DATE this.state. ,s.QUANTITY this.state. ,a.PARVALUE this.state. ,s.QUANTITY * a.PARVALUE TOTALthis.state. ,
s.PRICE this.state. ,s.FEEAMT this.state. ,s.TAXAMT this.state. ,s.QUANTITY * s.PRICE - s.FEEAMT - s.TAXAMT exact_totalthis.state. ,
al2.CDCONTENT APPR_STAT this.state. ,al3.CDCONTENT TRANSFER_STATthis.state. ,s.SHS_REASON this.state. ,s.TRANSFER_STAT
FROM SEREQCLOSE s 
	JOIN OXMAST o
		ON s.ORGCONFIRMNO = o.CONFIRMNO 
	JOIN ASSETDTL a
		ON s.SYMBOL = a.SYMBOL 
	JOIN ALLCODE al1
		ON o.CATEGORY = al1.CDVAL AND CDTYPE ='OX' AND CDNAME ='OXPOSTCTG'
	LEFT JOIN PRODUCT p
		ON o.PRODUCTID = p.AUTOID 
	JOIN CFMAST c1
		ON c1.CUSTID = s.ACCTNO 
	JOIN CFMAST c2 
		ON c2.CUSTID =  s.DEALERACCTNO
	JOIN ALLCODE al2
		ON al2.CDVAL = s.APPR_STAT AND al2.CDTYPE ='OX' AND al2.CDNAME ='APPRSTAT'
	JOIN ALLCODE al3
		ON al3.CDVAL = s.TRANSFER_STAT AND al3.CDTYPE ='OX' AND al3.CDNAME ='TRANSTAT'
	WHERE s.STATUS ='A'	 AND o.STATUS <> 'R' AND s.TRANSFER_STAT ='P';

    End If;

plog.setEndSection(pkgctxthis.state. , 'prc_get_modify_maxqtty');
exception
when others then
  p_err_code := errnums.C_SYSTEM_ERROR;
  plog.error(pkgctxthis.state. ,'Err: ' || sqlerrm || ' Trace: ' || dbms_utility.format_error_backtrace );
  plog.setEndSection(pkgctxthis.state. , 'prc_get_modify_maxqtty');
end prc_get_modify_maxqtty;
---------------------------------------------------------------------------------		
		
		
fn_process_2102